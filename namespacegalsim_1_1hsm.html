<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>GalSim: galsim::hsm Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">GalSim
   &#160;<span id="projectnumber">0.4.1</span>
   </div>
   <div id="projectbrief">The modular galaxy image simulation toolkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="namespacemembers.html"><span>Package&#160;Functions</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegalsim.html">galsim</a></li><li class="navelem"><a class="el" href="namespacegalsim_1_1hsm.html">hsm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">galsim::hsm Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgalsim_1_1hsm_1_1_h_s_m_params.html">HSMParams</a></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgalsim_1_1hsm_1_1_object_data.html">ObjectData</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Characterizes the shape and other parameters of objects.  <a href="structgalsim_1_1hsm_1_1_object_data.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgalsim_1_1hsm_1_1_cpp_h_s_m_shape_data.html">CppHSMShapeData</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct containing information about the shape of an object.  <a href="structgalsim_1_1hsm_1_1_cpp_h_s_m_shape_data.html#details">More...</a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a20b000f241fd1c2a8f4f3b160254107b"><td class="memItemLeft" align="right" valign="top">const boost::shared_ptr<br class="typebreak"/>
&lt; <a class="el" href="structgalsim_1_1hsm_1_1_h_s_m_params.html">HSMParams</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegalsim_1_1hsm.html#a20b000f241fd1c2a8f4f3b160254107b">default_hsmparams</a> (new <a class="el" href="structgalsim_1_1hsm_1_1_h_s_m_params.html">HSMParams</a>())</td></tr>
<tr class="memitem:a23749fcee10bad9d22026eb9923decc3"><td class="memTemplParams" colspan="2">template&lt;typename T , typename U &gt; </td></tr>
<tr class="memitem:a23749fcee10bad9d22026eb9923decc3"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="structgalsim_1_1hsm_1_1_cpp_h_s_m_shape_data.html">CppHSMShapeData</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacegalsim_1_1hsm.html#a23749fcee10bad9d22026eb9923decc3">EstimateShearHSMView</a> (const <a class="el" href="classgalsim_1_1_image_view.html">ImageView</a>&lt; T &gt; &amp;gal_image, const <a class="el" href="classgalsim_1_1_image_view.html">ImageView</a>&lt; U &gt; &amp;PSF_image, const <a class="el" href="classgalsim_1_1_image_view.html">ImageView</a>&lt; int &gt; &amp;gal_mask_image, float sky_var=0.0, const char *shear_est=&quot;REGAUSS&quot;, const std::string &amp;recompute_flux=&quot;FIT&quot;, double guess_sig_gal=5.0, double guess_sig_PSF=3.0, double precision=1.0e-6, double guess_x_centroid=-1000.0, double guess_y_centroid=-1000.0, boost::shared_ptr&lt; HSMParams &gt; hsmparams=boost::shared_ptr&lt; HSMParams &gt;())</td></tr>
<tr class="memdesc:a23749fcee10bad9d22026eb9923decc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Carry out PSF correction directly using ImageViews.  <a href="#a23749fcee10bad9d22026eb9923decc3"></a><br/></td></tr>
<tr class="memitem:ae55199530b86cf89a8d5a84e35f54fea"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:ae55199530b86cf89a8d5a84e35f54fea"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="structgalsim_1_1hsm_1_1_cpp_h_s_m_shape_data.html">CppHSMShapeData</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacegalsim_1_1hsm.html#ae55199530b86cf89a8d5a84e35f54fea">FindAdaptiveMomView</a> (const <a class="el" href="classgalsim_1_1_image_view.html">ImageView</a>&lt; T &gt; &amp;object_image, const <a class="el" href="classgalsim_1_1_image_view.html">ImageView</a>&lt; int &gt; &amp;object_mask_image, double guess_sig=5.0, double precision=1.0e-6, double guess_x_centroid=-1000.0, double guess_y_centroid=-1000.0, boost::shared_ptr&lt; HSMParams &gt; hsmparams=boost::shared_ptr&lt; HSMParams &gt;())</td></tr>
<tr class="memdesc:ae55199530b86cf89a8d5a84e35f54fea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Measure the adaptive moments of an object directly using ImageViews.  <a href="#ae55199530b86cf89a8d5a84e35f54fea"></a><br/></td></tr>
<tr class="memitem:aa3e73b23fdc2060c56b2c7f79b47b973"><td class="memTemplParams" colspan="2">template&lt;typename T , typename U &gt; </td></tr>
<tr class="memitem:aa3e73b23fdc2060c56b2c7f79b47b973"><td class="memTemplItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacegalsim_1_1hsm.html#aa3e73b23fdc2060c56b2c7f79b47b973">general_shear_estimator</a> (<a class="el" href="classgalsim_1_1_const_image_view.html">ConstImageView</a>&lt; T &gt; gal_image, <a class="el" href="classgalsim_1_1_const_image_view.html">ConstImageView</a>&lt; int &gt; gal_mask, <a class="el" href="classgalsim_1_1_const_image_view.html">ConstImageView</a>&lt; U &gt; PSF_image, <a class="el" href="classgalsim_1_1_const_image_view.html">ConstImageView</a>&lt; int &gt; PSF_mask, <a class="el" href="structgalsim_1_1hsm_1_1_object_data.html">ObjectData</a> &amp;gal_data, <a class="el" href="structgalsim_1_1hsm_1_1_object_data.html">ObjectData</a> &amp;PSF_data, const std::string &amp;shear_est, unsigned long flags, boost::shared_ptr&lt; <a class="el" href="structgalsim_1_1hsm_1_1_h_s_m_params.html">HSMParams</a> &gt; hsmparams=boost::shared_ptr&lt; <a class="el" href="structgalsim_1_1hsm_1_1_h_s_m_params.html">HSMParams</a> &gt;())</td></tr>
<tr class="memdesc:aa3e73b23fdc2060c56b2c7f79b47b973"><td class="mdescLeft">&#160;</td><td class="mdescRight">Carry out PSF correction.  <a href="#aa3e73b23fdc2060c56b2c7f79b47b973"></a><br/></td></tr>
<tr class="memitem:a33eec9c79c7082635996e17dd9cff059"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a33eec9c79c7082635996e17dd9cff059"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacegalsim_1_1hsm.html#a33eec9c79c7082635996e17dd9cff059">find_ellipmom_2</a> (<a class="el" href="classgalsim_1_1_const_image_view.html">ConstImageView</a>&lt; T &gt; data, <a class="el" href="classgalsim_1_1_const_image_view.html">ConstImageView</a>&lt; int &gt; mask, double &amp;A, double &amp;x0, double &amp;y0, double &amp;Mxx, double &amp;Mxy, double &amp;Myy, double &amp;rho4, double epsilon, int &amp;num_iter, boost::shared_ptr&lt; <a class="el" href="structgalsim_1_1hsm_1_1_h_s_m_params.html">HSMParams</a> &gt; hsmparams=boost::shared_ptr&lt; <a class="el" href="structgalsim_1_1hsm_1_1_h_s_m_params.html">HSMParams</a> &gt;())</td></tr>
<tr class="memdesc:a33eec9c79c7082635996e17dd9cff059"><td class="mdescLeft">&#160;</td><td class="mdescRight">Measure the adaptive moments of an object.  <a href="#a33eec9c79c7082635996e17dd9cff059"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a20b000f241fd1c2a8f4f3b160254107b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const boost::shared_ptr&lt;<a class="el" href="structgalsim_1_1hsm_1_1_h_s_m_params.html">HSMParams</a>&gt; galsim::hsm::default_hsmparams </td>
          <td>(</td>
          <td class="paramtype">new &#160;</td>
          <td class="paramname"><em>HSMParams</em>()</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a23749fcee10bad9d22026eb9923decc3"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T , typename U &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgalsim_1_1hsm_1_1_cpp_h_s_m_shape_data.html">CppHSMShapeData</a> galsim::hsm::EstimateShearHSMView </td>
          <td>(</td>
          <td class="paramtype">const ImageView&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>gal_image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ImageView&lt; U &gt; &amp;&#160;</td>
          <td class="paramname"><em>PSF_image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ImageView&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>gal_mask_image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>sky_var</em> = <code>0.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>shear_est</em> = <code>&quot;REGAUSS&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>recompute_flux</em> = <code>&quot;FIT&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>guess_sig_gal</em> = <code>5.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>guess_sig_PSF</em> = <code>3.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>precision</em> = <code>1.0e-6</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>guess_x_centroid</em> = <code>-1000.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>guess_y_centroid</em> = <code>-1000.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boost::shared_ptr&lt; HSMParams &gt;&#160;</td>
          <td class="paramname"><em>hsmparams</em> = <code>boost::shared_ptr&lt;&#160;HSMParams&#160;&gt;()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Carry out PSF correction directly using ImageViews. </p>
<p>A template function to carry out one of the multiple possible methods of PSF correction using the HSM package, directly accessing the input ImageViews. The input arguments get repackaged before calling general_shear_estimator, and results for the shape measurement are returned as <a class="el" href="structgalsim_1_1hsm_1_1_cpp_h_s_m_shape_data.html" title="Struct containing information about the shape of an object.">CppHSMShapeData</a>. There are two arguments that have default values, namely shear_est (the type of shear estimator) and recompute_flux (for the REGAUSS method only).</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">gal_image</td><td>The <a class="el" href="classgalsim_1_1_image_view.html" title="ImageView class is a mutable view of an Image.">ImageView</a> for the galaxy being measured </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">PSF_image</td><td>The <a class="el" href="classgalsim_1_1_image_view.html" title="ImageView class is a mutable view of an Image.">ImageView</a> for the PSF </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">gal_mask_image</td><td>The <a class="el" href="classgalsim_1_1_image_view.html" title="ImageView class is a mutable view of an Image.">ImageView</a> for the mask image to be applied to the galaxy being measured (integer array, 1=use pixel and 0=do not use pixel). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sky_var</td><td>The variance of the sky level, used for estimating uncertainty on the measured shape; default 0. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*shear_est</td><td>A string indicating the desired method of PSF correction: REGAUSS, LINEAR, BJ, or KSB; default REGAUSS. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*recompute_flux</td><td>A string indicating whether to recompute the object flux, which should be NONE (for no recomputation), SUM (for recomputation via an unweighted sum over unmasked pixels), or FIT (for recomputation using the Gaussian + quartic fit). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">guess_sig_gal</td><td>Optional argument with an initial guess for the Gaussian sigma of the galaxy, default 5.0 (pixels). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">guess_sig_PSF</td><td>Optional argument with an initial guess for the Gaussian sigma of the PSF, default 3.0 (pixels). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">precision</td><td>The convergence criterion for the moments; default 1e-6. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">guess_x_centroid</td><td>Optional argument with an initial guess for the x centroid of the galaxy; if not set, then the code will try the center of the image. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">guess_y_centroid</td><td>Optional argument with an initial guess for the y centroid of the galaxy; if not set, then the code will try the center of the image. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>A <a class="el" href="structgalsim_1_1hsm_1_1_cpp_h_s_m_shape_data.html" title="Struct containing information about the shape of an object.">CppHSMShapeData</a> object containing the results of shape measurement. </dd></dl>

</div>
</div>
<a class="anchor" id="a33eec9c79c7082635996e17dd9cff059"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void galsim::hsm::find_ellipmom_2 </td>
          <td>(</td>
          <td class="paramtype">ConstImageView&lt; T &gt;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ConstImageView&lt; int &gt;&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>x0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>y0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>Mxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>Mxy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>Myy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>rho4</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>epsilon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>num_iter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boost::shared_ptr&lt; HSMParams &gt;&#160;</td>
          <td class="paramname"><em>hsmparams</em> = <code>boost::shared_ptr&lt;&#160;HSMParams&#160;&gt;()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Measure the adaptive moments of an object. </p>
<p>This function iteratively computes the adaptive moments of an image, and tells the user the results plus other diagnostic information. The key result is the best-fit elliptical Gaussian to the object, which is computed by initially guessing a circular Gaussian that is used as a weight function, computing the weighted moments, recomputing the moments using the result of the previous step as the weight function, and so on until the moments that are measured are the same as those used for the weight function. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>The <a class="el" href="classgalsim_1_1_image.html" title="Image class.">Image</a> for the object being measured. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mask</td><td>The mask <a class="el" href="classgalsim_1_1_image.html" title="Image class.">Image</a> for the object being measured (integers: 1=use pixel, 0=do not use pixel). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">A</td><td>The amplitude of the best-fit elliptical Gaussian (total image intensity for the Gaussian is 2A). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">x0</td><td>The x centroid of the best-fit elliptical Gaussian. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">y0</td><td>The y centroid of the best-fit elliptical Gaussian. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">Mxx</td><td>The xx component of the moment matrix. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">Mxy</td><td>The xy component of the moment matrix. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">Myy</td><td>The yy component of the moment matrix. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rho4</td><td>The weighted radial fourth moment. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">epsilon</td><td>The required level of accuracy. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">num_iter</td><td>The number of iterations needed to converge. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae55199530b86cf89a8d5a84e35f54fea"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgalsim_1_1hsm_1_1_cpp_h_s_m_shape_data.html">CppHSMShapeData</a> galsim::hsm::FindAdaptiveMomView </td>
          <td>(</td>
          <td class="paramtype">const ImageView&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>object_image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ImageView&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>object_mask_image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>guess_sig</em> = <code>5.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>precision</em> = <code>1.0e-6</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>guess_x_centroid</em> = <code>-1000.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>guess_y_centroid</em> = <code>-1000.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boost::shared_ptr&lt; HSMParams &gt;&#160;</td>
          <td class="paramname"><em>hsmparams</em> = <code>boost::shared_ptr&lt;&#160;HSMParams&#160;&gt;()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Measure the adaptive moments of an object directly using ImageViews. </p>
<p>This function repackages the input <a class="el" href="classgalsim_1_1_image_view.html" title="ImageView class is a mutable view of an Image.">ImageView</a> in a format that find_ellipmom_2 accepts, in order to iteratively compute the adaptive moments of an object. The key result is the best-fit elliptical Gaussian to the object, which is computed by initially guessing a circular Gaussian that is used as a weight function, computing the weighted moments, recomputing the moments using the result of the previous step as the weight function, and so on until the moments that are measured are the same as those used for the weight function.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">object_image</td><td>The <a class="el" href="classgalsim_1_1_image_view.html" title="ImageView class is a mutable view of an Image.">ImageView</a> for the object being measured. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">object_mask_image</td><td>The <a class="el" href="classgalsim_1_1_image_view.html" title="ImageView class is a mutable view of an Image.">ImageView</a> for the mask image to be applied to the object being measured (integer array, 1=use pixel and 0=do not use pixel). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">guess_sig</td><td>Optional argument with an initial guess for the Gaussian sigma of the object, default 5.0 (pixels). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">precision</td><td>The convergence criterion for the moments; default 1e-6. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">guess_x_centroid</td><td>Optional argument with an initial guess for the x centroid of the galaxy; if not set, then the code will try the center of the image. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">guess_y_centroid</td><td>Optional argument with an initial guess for the y centroid of the galaxy; if not set, then the code will try the center of the image. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>A <a class="el" href="structgalsim_1_1hsm_1_1_cpp_h_s_m_shape_data.html" title="Struct containing information about the shape of an object.">CppHSMShapeData</a> object containing the results of moment measurement. </dd></dl>

</div>
</div>
<a class="anchor" id="aa3e73b23fdc2060c56b2c7f79b47b973"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T , typename U &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">unsigned int galsim::hsm::general_shear_estimator </td>
          <td>(</td>
          <td class="paramtype">ConstImageView&lt; T &gt;&#160;</td>
          <td class="paramname"><em>gal_image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ConstImageView&lt; int &gt;&#160;</td>
          <td class="paramname"><em>gal_mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ConstImageView&lt; U &gt;&#160;</td>
          <td class="paramname"><em>PSF_image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ConstImageView&lt; int &gt;&#160;</td>
          <td class="paramname"><em>PSF_mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ObjectData &amp;&#160;</td>
          <td class="paramname"><em>gal_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ObjectData &amp;&#160;</td>
          <td class="paramname"><em>PSF_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>shear_est</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boost::shared_ptr&lt; HSMParams &gt;&#160;</td>
          <td class="paramname"><em>hsmparams</em> = <code>boost::shared_ptr&lt;&#160;HSMParams&#160;&gt;()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Carry out PSF correction. </p>
<p>Carry out one of the multiple possible methods of PSF correction using the HSM package. Results for the shape measurement are returned by modifying the galaxy data directly. The flags parameter is only used for the REGAUSS shape measurement method, and is defined as follows: 0x1=recompute galaxy flux by summing unmasked pixels, 0x2=recompute galaxy flux from Gaussian-quartic fit, 0x4=cut off Gaussian approximator at NSIG_RG sigma to save time, 0x8=cut off PSF residual at NSIG_RG2 to save time. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">gal_image</td><td>The galaxy <a class="el" href="classgalsim_1_1_image.html" title="Image class.">Image</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">gal_mask</td><td>The galaxy mask <a class="el" href="classgalsim_1_1_image.html" title="Image class.">Image</a> (integers: 1=use pixel, 0=do not use pixel). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">PSF_image</td><td>The PSF <a class="el" href="classgalsim_1_1_image.html" title="Image class.">Image</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">PSF_mask</td><td>The PSF mask <a class="el" href="classgalsim_1_1_image.html" title="Image class.">Image</a> (integers: 1=use pixel, 0=do not use pixel). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">gal_data</td><td>The <a class="el" href="structgalsim_1_1hsm_1_1_object_data.html" title="Characterizes the shape and other parameters of objects.">ObjectData</a> object for the galaxy </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">PSF_data</td><td>The <a class="el" href="structgalsim_1_1hsm_1_1_object_data.html" title="Characterizes the shape and other parameters of objects.">ObjectData</a> object for the PSF </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">shear_est</td><td>A string indicating the desired method of PSF correction: REGAUSS, LINEAR, BJ, or KSB. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>A parameter for REGAUSS (typical usage is 0xe). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>A status flag that should be zero if the measurement was successful. </dd></dl>

</div>
</div>
</div><!-- contents -->
<hr class="footer"/><address class="footer"><small>
Generated for GalSim by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1</small></address>
</body>
</html>
