# vim: set filetype=python :

import os

Import('env')
RunInstall = env['_RunInstall']
RunUninstall = env['_RunUninstall']

install_subdir = 'share'
install_prefix = env['FINAL_PREFIX']
local_prefix = Dir('#.').abspath

files = [ 'vega.txt' ]

if 'install' in COMMAND_LINE_TARGETS:
    prefix = install_prefix
else:
    prefix = local_prefix

# Write file share_dir.py to have the correct 
f = open(os.path.join('..','galsim','meta_data.py'),'w')
f.write('# This file is automatically generated by SCons when building GalSim.\n')
f.write('# Do not edit.  Any edits will be lost the next time SCons is run.\n')
f.write('\n')
f.write('install_dir = "%s"\n'%prefix)
f.write('share_dir = "%s"\n'%os.path.join(prefix,'share'))
f.close()

if 'install' in COMMAND_LINE_TARGETS:
    RunInstall(env, files, install_subdir)

if 'uninstall' in COMMAND_LINE_TARGETS:
    RunUninstall(env, files, install_subdir)


