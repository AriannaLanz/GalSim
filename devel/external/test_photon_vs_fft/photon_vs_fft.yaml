# filename of the output catalog with moments measurements for photon and FFT images
# this filename may be appended if settings are being changed, for example if we are exploring
# the impact of GSParams, one file will be created for each settings value
filename_output : gsp.cat

# how to draw the PSF for HSM moments correction? 'fft' or 'shoot'
psf_draw_method: 'fft'  

image: 
 # number of pixels in the postage stamp
 n_pix: 96
 # pixel scale
 n_photons: 20000000
 # 'space' or 'ground' - there is a specific PSF and pixel size for each observation type
 observe_from: ['space','ground']         

# decide whether you want to use the galaxies in the 'list_gals' key (see below)
# or the provided sersics catalog with random ellipticity angles
# with two hardcoded PSFs (space and ground)
# with random PSF ellipticities and random centers
use_galaxies_from: 'sersics_sample' # 'list_gals' or 'sersics_sample'

# details for the sersics sample
sersics_sample:
   catalog_filename: cosmos_sersics_sample_N300.asc #
   max_random_dx: 0.5      # will be drawn from uniform (arcsec)
   max_random_psf_g: 0.2   # will be drawn from uniform

gsparams:
   # We'd go for the two "threshold" values first, alias_threshold and maxk_threshold
   - {name: alias_threshold, grid: [0.05, 0.005, 0.0005]}
   - {name: maxk_threshold, grid: [0.01, 0.001, 0.0001]}

# gsparams:
#  minimum_fft_size: 128      
#  maximum_fft_size: 4096     
#  alias_threshold: 5.e-3     
#  maxk_threshold: 1.e-3      
#  kvalue_accuracy: 1.e-5     
#  xvalue_accuracy: 1.e-5     
#  shoot_accuracy: 1.e-5      
#  realspace_relerr: 1.e-3    
#  realspace_relerr: 1.e-6    
#  integration_relerr: 1.e-5  
#  integration_abserr: 1.e-7  
 
# this dictionary contains the list of custom galaxies and PSFs, for which the test will be ran
list_gals: 

# shifts unconvolved
 - 
   bulge: {half_light_radius: 2.0, sersic_index: 4.0, g1: 0.3, g2: 0.2, dx: 0.5, dy: 0.0, flux: 1.}
   disc:  {half_light_radius: 1.5, sersic_index: 1.0, g1: 0.3, g2: 0.2, dx: 0.5, dy: 0.0, flux: 1.}
   psf: {type: 'none'}
 - 
   bulge: {half_light_radius: 2.0, sersic_index: 4.0, g1: 0.3, g2: 0.2, dx: 0.55, dy: 0.23, flux: 1.}
   disc:  {half_light_radius: 1.5, sersic_index: 1.0, g1: 0.3, g2: 0.2, dx: 0.55, dy: 0.23, flux: 1.}
   psf: {type: 'none'}
# shifts convolved
 - 
   bulge: {half_light_radius: 1., sersic_index: 4.0, g1: 0.3, g2: -0.2, dx: 0.25, dy: -0.31, flux: 1.}
   disc:  {half_light_radius: 0.75, sersic_index: 1.0, g1: 0.5, g2:  0.5, dx: 0.25, dy: -0.31, flux: 1.}
   psf: {type: 'Moffat',  beta: 3.0,  fwhm: 0.65,  g1: -0.1,  g2: 0.1}
# different bulge and disc ellipticities
 - 
   bulge: {half_light_radius: 1., sersic_index: 4.0, g1: 0.3, g2: -0.2, dx: 0.0, dy: 0.0, flux: 1.}
   disc:  {half_light_radius: 0.75, sersic_index: 1.0, g1: 0.5, g2:  0.5, dx: 0.0, dy: 0.0, flux: 1.}
   psf: {type: 'Moffat',  beta: 3.0,  fwhm: 0.65,  g1: 0.0202,  g2: 0.0}
# Kolmogorov PSF
 - 
   bulge: {half_light_radius: 1., sersic_index: 4.0, g1: 0.3, g2: -0.2, dx: 0.0, dy: 0.0, flux: 1.}
   disc:  {half_light_radius: 0.75, sersic_index: 1.0, g1: 0.5, g2:  0.5, dx: 0.0, dy: 0.0, flux: 1.}
   psf: {type: 'AtmosphericPSF',  fwhm: 0.65,  g1: 0.0202,  g2: 0.0}
# Airy PSF
 - 
   bulge: {half_light_radius: 1., sersic_index: 4.0, g1: 0.3, g2: -0.2, dx: 0.0, dy: 0.0, flux: 1.}
   disc:  {half_light_radius: 0.75, sersic_index: 1.0, g1: 0.5, g2:  0.5, dx: 0.0, dy: 0.0, flux: 1.}
   psf: {type: 'Airy',  lam_over_diam: 0.5,  g1: 0.0202,  g2: 0.0}
# optical PSF?
# - 
#   bulge: {half_light_radius: 3.5, sersic_index: 4.0, g1: 0.3, g2: -0.2, dx: 0.0, dy: 0.0, flux: 1.}
#   disc:  {half_light_radius: 2.0, sersic_index: 1.0, g1: 0.5, g2:  0.5, dx: 0.0, dy: 0.0, flux: 1.}
#   psf: {type: 'Kolmogorov',  beta: 3.0,  fwhm: 2.85,  g1: 0.01,  g2: 0.01}

# small galaxy size
 - 
   bulge: {half_light_radius: 1. , sersic_index: 4.0, g1: -0.3, g2: -0.2, dx: 0.01, dy: 0.01, flux: 1.}
   disc:  {half_light_radius: 2.0, sersic_index: 1.0, g1: -0.5, g2:  0.5, dx: 0.01, dy: 0.01, flux: 1.}
   psf: {type: 'AtmosphericPSF',  fwhm: 0.65,  g1: 0.0202,  g2: 0.0}
   
# big galaxy size
 - 
   bulge: {half_light_radius: 2., sersic_index: 4.0, g1: -0.3, g2: -0.2, dx: 0.01, dy: 0.01, flux: 1.}
   disc:  {half_light_radius: 1., sersic_index: 1.0, g1: -0.5, g2:  0.5, dx: 0.01, dy: 0.01, flux: 1.}
   psf: {type: 'AtmosphericPSF',  fwhm: 2.85,  g1: 0.0202,  g2: 0.0}

# different bulge and disc shift

 - 
   bulge: {half_light_radius: 2., sersic_index: 4.0, g1: -0.3, g2: -0.2, dx: 0.5, dy: 0.5, flux: 1.}
   disc:  {half_light_radius: 1., sersic_index: 1.0, g1: -0.5, g2:  0.5, dx: 0.01, dy: 0.01, flux: 1.}
   psf: {type: 'Moffat',  fwhm: 0.65, beta: 3.0, g1: 0.0202,  g2: 0.0}
